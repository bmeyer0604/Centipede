const Laser = require("./laser");
const Util = require("../src/util");

const mushroom1 = "data:image/png;base64,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";
const mushroom2 = "data:image/png;base64,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";
const mushroom3 = "data:image/png;base64,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";
const mushroom4 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKoAAACMCAYAAADsgzKpAAAEvElEQVR4Xu2dMW4VQRBE7RM44hBIHACJiJQDkxIhcQAkDkHkE4DklL+ovqt3dsr1HE/3VFe97e/vFeLxgR8cCHDgMUAjEnHgAVCBIMIBQI2ICZGACgMRDgBqREyIBFQYiHAAUCNiQiSgwkCEA4AaERMiARUGIhwA1IiYEAmoMBDhAKBGxIRIQIWBCAcANSImRAIqDEQ4AKgRMSESUGEgwgFAjYgJkXWg/v745c/Osb/78bUuEyWPOlMAVcFivzOAulkmbNTbgQAqoG7mAKC+OMBHfwSX/4hko26WGx/9bFQ26mYP5T1y2Kj3uLXgLBuVjcpGXfCgnXUFG/UsZ1/Zl40aulGnv6X//PX9lQitKfvw/tPoRW8F/O03KqB63AKq559cDaiyVTcPAqrnn1wNqLJVgOpZ5VUDqucfG9XzT64GVNkqNqpnlVcNqJ5/bFTPP7kaUGWr2KieVV41oHr+sVE9/+RqQJWtYqN6Vt2uVgHc/U3SGd5M9lTfdO2+eS97MwWokzge9wJU02dANQ0UywFVNOroGKCaBorlgCoaBaimUWY5oJoGslFNA8VyQBWNYqOaRpnlgGoayEY1DRTLAVU0io1qGmWWA6ppIBvVNFAsB9QDowBQJGizY7sDPf5mClA3I1CUA6gHRvEOXyRo0TFABdRFqHnXACqgegQtqgZUQF2EmncNoAKqR9CiakAF1EWoedcAKqB6BC2qBlRAXYSadw2gHvin/hudb09PW/+/UB4e+1QDKqDuQ+N/lAAqoALqgAOXvevno38gvcEWbFQ26iBO57UCVEA9j67BzoAKqIM4ndcKUAH1PLoGOwMqoA7idF4rQAXU8+ga7FwHquqd+sbp8/Oz9Cc0tZ+qT71X7afqU+9V+6n61HNXAS1BoA5xzznV6KuCU+9VZ959XnUOQD1wSgVGBUENRL1X7afqU+9V+6n61HOACqgvDgDqbRD46DcfEHUTqRsQUAFVZequzaY2BVTVKUC9yyl1s6lNAVV1ClDvcgpQb9vFlynzd0V1Y6m0AiqgvjiggqUCo/YDVNUBQPWcOqhWQZ0GX+2nDj09x+73qvou+/OUKlA9Nx3wdL+r5tj9XlUfoC7a0GogbQ+I6gugAuop3xlUANVzgAqogKo+LRPnpj8yp/upM7bdq/rCRmWjslHVp2Xi3PQmmu6nzth2r+oLG5WNykZVn5aJc9ObaLqfOmPbvaovb2ajqgNzLtMBQM3MrU41oNZFnjkwoGbmVqcaUOsizxwYUDNzq1MNqHWRZw4MqJm51akG1LrIMwcG1Mzc6lQDal3kmQMDamZudaoBtS7yzIEBNTO3OtWAWhd55sCAmplbnWpArYs8c2BAzcytTjWg1kWeOTCgZuZWpxpQ6yLPHBhQM3OrUw2odZFnDgyombnVqQbUusgzBwbUzNzqVANqXeSZAwNqZm51qgG1LvLMgQE1M7c61YBaF3nmwICamVudakCtizxzYEDNzK1ONaDWRZ45MKBm5lanGlDrIs8cGFAzc6tTDah1kWcODKiZudWpBtS6yDMHBtTM3OpUA2pd5JkDA2pmbnWqAbUu8syBATUztzrVgFoXeebAgJqZW51qQK2LPHNgQM3MrU71XxvOiquiXrlxAAAAAElFTkSuQmCC";
const mushroom5 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACMCAYAAAD7oaJgAAAEdUlEQVR4Xu3dMW4cRxSEYeoEinwIAzqAAEdOfWCnigToAAJ0CEc8gQ0zk8VdFPHebrW1H+Oerpm//6nemSXId09+ECgSeFfMFo3AEwFJUCVAwCp+4QTkQJUAAav4hROQA1UCBKziF05ADlQJELCKXzgBOVAlQMAqfuEE5ECVAAGr+IUTkANVAgSs4hdOQA5UCRCwil84ATlQJUDAKn7hBORAlQABq/iFE5ADVQIErOIXTkAOVAkQsIpfOAE5UCVAwCp+4QTkQJUAAav4hROQA1UCBKziF05ADlQJELCKXzgBOVAlQMAqfuEE5ECVAAGr+IUTkANVAgSs4hf+cAL+9fGPv09e9l++/PlQa/JQF/uveAQ86/Yj4Fnr8aQBD1uQ7dPRgNtEZ/NpwBm/9aM14DrSsybUgGethwY8az18BjxsPdZPRwOuIx1NqAFH+PYP9hlwn+lRM2rAo5bj/P8XvC3M12+fz1qB/5zNh19/Wz2/0xv1+C2YgDMfCTjjt/7VmQYcLsjy4RpwGeh0OlvwlODy8bbgGVBb8IyfLXjIj4BDgBpwBpCAM34acMiPgEOAGnAGkIAzfhpwyI+AFwCmzXb6e7uhHzc/PH2t0xK19h6QgDd37yWAgBrwPqZdSCEgAQl4hYAtuKrH7cM1oAa8vWVXEghIQALagqsOVMM1oAYkoAasOlANf7gGbL1g/v35OXqi//T+ffTXsU6fb9vqlqjRor3lYgn4Oq1tod+yJslYAiaUrozZXuDT5xvi+uFwAg6Jni7M9vkNcRFw+7dcthf49PkIeNjrldOF2T4/AhLwhUDrqZqABCTgwl3gNcwFiNtb5vZ8C2v/3RSegodEtxf49PmGuDwFp0/BqQjbC7I93+mfFTXgcCvcFmZ7PgK+TvT4z4Aa8PWFS4VObyQNqAFfCKQ3HAHv9BomXZD0Tm+NS4VJrzedL71eDagBNWB6t1wbt/3rWGkjbJz7LedIGyu93nS+9Jo0oAbUgOndogHfTiptLA34drbfHWELnr02IeCdnm6Hnv9weLpw27npfGkDpvOl19vKTa8jfhG93WzpCabj0gVJ59se1xKhlZvyI2BKajiuJUIrN8VFwJTUcFxLhFZuiouAKanhuJYIrdwUFwFTUsNxLRFauSkuAqakhuNaIrRyU1wETEkNx7VEaOWmuAiYkhqOa4nQyk1xETAlNRzXEqGVm+KKBUwnbF1wmnv6C+uUc2tc+oVE+n9HCNhayf9pLgEvLJwGvI/RBCTgfUy7kEJAAhLwGoF0K0wppg8NaW46X3p+jzZOA2rAqvMEJCABbcFVB6rhGlADErBKQPhPRWD9m5Cfio6LuTkBAt4csYBrBAjIjyoBAlbxCycgB6oECFjFL5yAHKgSIGAVv3ACcqBKgIBV/MIJyIEqAQJW8QsnIAeqBAhYxS+cgByoEiBgFb9wAnKgSoCAVfzCCciBKgECVvELJyAHqgQIWMUvnIAcqBIgYBW/cAJyoEqAgFX8wgnIgSoBAlbxCycgB6oE/gHjUBa69u33LAAAAABJRU5ErkJggg==";

class Mushroom {
    constructor(context, canvasWidth, canvasHeight, x, y, game) {
        this.context = context;
        this.canvasWidth = canvasWidth;
        this.canvasHeight = canvasHeight;
        this.image = new Image();
        this.image.src = mushroom1;
        this.x = x;
        this.y = y;
        this.radius = 11;
        this.game = game;

        this.poisoned = false;
    }

    draw(ctx) {
        this.context.drawImage(this.image, this.x, this.y, 20, 20);
    }

    isCollidedWith(otherObj) {
        const centerDist = Util.dist([this.x, this.y], [otherObj.x, otherObj.y]);
        return centerDist < (this.radius + otherObj.radius)
    }

    collideWith(otherObj) {
        if(otherObj instanceof Laser) {
            otherObj.remove();
            this.take_damage();
        }
    }

    take_damage() {
        if(this.image.src === mushroom1) {
            this.image.src = mushroom2;
        } else if(this.image.src === mushroom2) {
            this.image.src = mushroom3;
        } else if(this.image.src === mushroom3) {
            this.image.src = mushroom4;
        } else if(this.image.src === mushroom4) {
            this.image.src = mushroom5;
        } else {
            this.remove();
            this.game.points += 1;
            this.game.checkPoints();
        }
    }

    move() {
    }

    remove() {
        this.game.remove(this);
    }
}

module.exports = Mushroom;